import{bG as l,bO as u,bN as v,ba as y,A as f}from"./index-3fJYBySH.js";import{b as g}from"./WebMap-GXXWVoPf.js";import"./ColorBackground-BTSOmsFp.js";import"./Cyclical-CpBqPbE5.js";import"./Basemap-BF_RVH--.js";import"./writeUtils-E4KNM9sp.js";import"./catalogUtils-C5l7KsZQ.js";import"./basemapUtils-Dj_1vtFV.js";import"./TablesMixin-BJRVIsxi.js";import"./jsonContext-BE6tJwxD.js";import"./project-e7_uneTN.js";async function q(e,t,r){var p;const o=l(e),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const s={...i,returnEdits:!0,f:"json"},n=u({...o.query,...s}),a=v(n,{...r,method:"post"}),c=`${o.path}/validateNetworkTopology`,{data:b}=await y(c,a),d=g.fromJSON(b);return d.serviceEdits=((p=d.serviceEdits)==null?void 0:p.map(m=>({layerId:m.id,editedFeatures:m.editedFeatures})))??[],d}async function F(e,t,r){if(!t.gdbVersion)throw new f("submit-validate-network-topology-job:missing-gdb-version","version is missing");const o=l(e),i=t.toJSON();t.validationSet&&(i.validationSet=JSON.stringify(t.validationSet));const s=v(o.query,{query:u({...i,returnEdits:!0,async:!0,f:"json"}),...r,method:"post"}),n=`${o.path}/validateNetworkTopology`,{data:a}=await y(n,s);return a?a.statusUrl:null}export{F as submitValidateNetworkTopologyJob,q as validateNetworkTopology};
