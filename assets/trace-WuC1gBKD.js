import{M as n,bX as s,bY as c,U as g}from"./index-DeC8R2EY.js";import{a as y}from"./WebMap-F2eB87jD.js";import"./ColorBackground-CCXAQYWM.js";import"./Cyclical-38T1ej_i.js";import"./Basemap-CLA9H8hr.js";import"./writeUtils-CAU0mSSk.js";import"./catalogUtils-CvPMm0ln.js";import"./basemapUtils-HzHsFYAS.js";import"./TablesMixin-C8OXRIvw.js";import"./FeatureLayer-7KR6wWwz.js";import"./FeatureLayerBase-EBb2I_nT.js";import"./HeightModelInfo-Dglyqlez.js";import"./workers-BguUern_.js";import"./editsZScale-DTdLYNgF.js";import"./EditBusLayer-8381OIDc.js";import"./uuid-fwrPAdZb.js";import"./FeatureEffectLayer-CE2Q1cAv.js";import"./FeatureEffect-D1PpR74G.js";import"./FeatureReductionLayer-vAjgliOm.js";import"./FeatureReductionSelection-BCh-NaTk.js";import"./MD5-C9MwAd2G.js";import"./OrderedLayer-w-3MZAaj.js";import"./OrderByInfo-Br9M7bNj.js";import"./fieldProperties-DODbFAxB.js";import"./styleUtils-DAM41-wy.js";import"./TopFeaturesQuery-CSoj0bgW.js";import"./interfaces-CL2NbQte.js";import"./jsonContext-DYXQjUFR.js";import"./project-zDkHlQI1.js";async function E(o,t,i){const r=n(o),e=t.toJSON();e.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(e.resultTypes=JSON.stringify(t.resultTypes));const a=s(r.query,{query:c({...e,f:"json"}),...i}),p=`${r.path}/trace`;return g(p,a).then(m=>u(m,t.outSpatialReference))}async function F(o,t,i){const r=n(o),e=t.toJSON();e.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(e.resultTypes=JSON.stringify(t.resultTypes));const a=s(r.query,{query:c({...e,async:!0,f:"json"}),...i}),p=`${r.path}/trace`,{data:m}=await g(p,a);return m.statusUrl}function u(o,t){const{data:i}=o,r=y.fromJSON(i.traceResults);return r.aggregatedGeometry&&t&&(r.aggregatedGeometry.line&&(r.aggregatedGeometry.line.spatialReference=t.clone()),r.aggregatedGeometry.multipoint&&(r.aggregatedGeometry.multipoint.spatialReference=t.clone()),r.aggregatedGeometry.polygon&&(r.aggregatedGeometry.polygon.spatialReference=t.clone())),r}export{F as submitTraceJob,E as trace};
