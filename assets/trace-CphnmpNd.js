import{M as n,bX as s,bY as c,U as g}from"./index-CzS7jo2D.js";import{a as y}from"./WebMap-D67xYSRc.js";import"./ColorBackground-47PVtrzo.js";import"./Cyclical-BlUOQMZ_.js";import"./Basemap-Hu7HZa5W.js";import"./writeUtils-BySt8C3g.js";import"./catalogUtils-D6TBKBjQ.js";import"./basemapUtils-CYgZVrru.js";import"./TablesMixin-CLlMVPod.js";import"./FeatureLayer-DOixJ4i0.js";import"./FeatureLayerBase-4b_SVBe6.js";import"./HeightModelInfo-CjM21LTA.js";import"./workers-CJtfUUkE.js";import"./editsZScale-Xx5dmFW9.js";import"./EditBusLayer-B9YYkkRq.js";import"./uuid-fwrPAdZb.js";import"./FeatureEffectLayer-DE-mynvc.js";import"./FeatureEffect-JpdJkuUt.js";import"./FeatureReductionLayer-DTWwtoC_.js";import"./FeatureReductionSelection-CqwKEQV5.js";import"./MD5-C9MwAd2G.js";import"./OrderedLayer-lqOPfAGX.js";import"./OrderByInfo-CYhHFHya.js";import"./fieldProperties-Cr-neBmP.js";import"./styleUtils-CTnw0KVq.js";import"./TopFeaturesQuery-BthXMYpM.js";import"./interfaces-CL2NbQte.js";import"./jsonContext-BXd7JEj7.js";import"./project-Cgducenl.js";async function E(o,t,i){const r=n(o),e=t.toJSON();e.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(e.resultTypes=JSON.stringify(t.resultTypes));const a=s(r.query,{query:c({...e,f:"json"}),...i}),p=`${r.path}/trace`;return g(p,a).then(m=>u(m,t.outSpatialReference))}async function F(o,t,i){const r=n(o),e=t.toJSON();e.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(e.resultTypes=JSON.stringify(t.resultTypes));const a=s(r.query,{query:c({...e,async:!0,f:"json"}),...i}),p=`${r.path}/trace`,{data:m}=await g(p,a);return m.statusUrl}function u(o,t){const{data:i}=o,r=y.fromJSON(i.traceResults);return r.aggregatedGeometry&&t&&(r.aggregatedGeometry.line&&(r.aggregatedGeometry.line.spatialReference=t.clone()),r.aggregatedGeometry.multipoint&&(r.aggregatedGeometry.multipoint.spatialReference=t.clone()),r.aggregatedGeometry.polygon&&(r.aggregatedGeometry.polygon.spatialReference=t.clone())),r}export{F as submitTraceJob,E as trace};
