import{M as n,bX as s,bY as c,U as g}from"./index-BmjI5m14.js";import{a as y}from"./WebMap-OFmXq9-0.js";import"./ColorBackground-BoPT6jnX.js";import"./Cyclical-BOAkOq_x.js";import"./Basemap-CmtSPRGE.js";import"./writeUtils-5mMxftrq.js";import"./catalogUtils-BSvrRBwV.js";import"./basemapUtils-DB3FNVLC.js";import"./TablesMixin-CoVbki-z.js";import"./FeatureLayer-DgzPgfiK.js";import"./FeatureLayerBase-Cds4gQNC.js";import"./HeightModelInfo--r7pBMJX.js";import"./workers-BHA0Wr2q.js";import"./editsZScale-CUhvGtyk.js";import"./EditBusLayer-B22yt6N8.js";import"./uuid-fwrPAdZb.js";import"./FeatureEffectLayer-BrMWM9x-.js";import"./FeatureEffect-BCCSrJ1M.js";import"./FeatureReductionLayer-cJEcYQTQ.js";import"./FeatureReductionSelection-DzS27Q7i.js";import"./MD5-C9MwAd2G.js";import"./OrderedLayer-Bxz6lvat.js";import"./OrderByInfo-B_s0ZP2H.js";import"./fieldProperties-CK_G7l6W.js";import"./styleUtils-DC30nmpJ.js";import"./TopFeaturesQuery-DYYbf18d.js";import"./interfaces-CL2NbQte.js";import"./jsonContext-B-8AcKuV.js";import"./project-DMcbiTFP.js";async function E(o,t,i){const r=n(o),e=t.toJSON();e.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(e.resultTypes=JSON.stringify(t.resultTypes));const a=s(r.query,{query:c({...e,f:"json"}),...i}),p=`${r.path}/trace`;return g(p,a).then(m=>u(m,t.outSpatialReference))}async function F(o,t,i){const r=n(o),e=t.toJSON();e.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(e.resultTypes=JSON.stringify(t.resultTypes));const a=s(r.query,{query:c({...e,async:!0,f:"json"}),...i}),p=`${r.path}/trace`,{data:m}=await g(p,a);return m.statusUrl}function u(o,t){const{data:i}=o,r=y.fromJSON(i.traceResults);return r.aggregatedGeometry&&t&&(r.aggregatedGeometry.line&&(r.aggregatedGeometry.line.spatialReference=t.clone()),r.aggregatedGeometry.multipoint&&(r.aggregatedGeometry.multipoint.spatialReference=t.clone()),r.aggregatedGeometry.polygon&&(r.aggregatedGeometry.polygon.spatialReference=t.clone())),r}export{F as submitTraceJob,E as trace};
